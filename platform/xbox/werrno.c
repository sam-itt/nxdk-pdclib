#include <errno.h>
#include <winapi/winerror.h>

errno_t werror_to_errno(DWORD werror, errno_t fallback_errno)
{
    switch(werror){
        case ERROR_ACCESS_DENIED: return _PDCLIB_EACCES;
        case ERROR_ACTIVE_CONNECTIONS: return _PDCLIB_EAGAIN;
        case ERROR_ALREADY_EXISTS: return _PDCLIB_EEXIST;
        case ERROR_BAD_DEVICE: return _PDCLIB_ENODEV;
        case ERROR_BAD_EXE_FORMAT: return _PDCLIB_ENOEXEC;
        case ERROR_BAD_NETPATH: return _PDCLIB_ENOENT;
        case ERROR_BAD_NET_NAME: return _PDCLIB_ENOENT;
        case ERROR_BAD_NET_RESP: return _PDCLIB_ENOSYS;
        case ERROR_BAD_PATHNAME: return _PDCLIB_ENOENT;
        case ERROR_BAD_PIPE: return _PDCLIB_EINVAL;
        case ERROR_BAD_UNIT: return _PDCLIB_ENODEV;
        case ERROR_BAD_USERNAME: return _PDCLIB_EINVAL;
        case ERROR_BEGINNING_OF_MEDIA: return _PDCLIB_EIO;
        case ERROR_BROKEN_PIPE: return _PDCLIB_EPIPE;
        case ERROR_BUSY: return _PDCLIB_EBUSY;
        case ERROR_BUS_RESET: return _PDCLIB_EIO;
        case ERROR_CALL_NOT_IMPLEMENTED: return _PDCLIB_ENOSYS;
        case ERROR_CANCELLED: return _PDCLIB_EINTR;
        case ERROR_CANNOT_MAKE: return _PDCLIB_EPERM;
        case ERROR_CHILD_NOT_COMPLETE: return _PDCLIB_EBUSY;
        case ERROR_COMMITMENT_LIMIT: return _PDCLIB_EAGAIN;
        case ERROR_CONNECTION_REFUSED: return _PDCLIB_ECONNREFUSED;
        case ERROR_CRC: return _PDCLIB_EIO;
        case ERROR_DEVICE_DOOR_OPEN: return _PDCLIB_EIO;
        case ERROR_DEVICE_IN_USE: return _PDCLIB_EAGAIN;
        case ERROR_DEVICE_REQUIRES_CLEANING: return _PDCLIB_EIO;
        case ERROR_DEV_NOT_EXIST: return _PDCLIB_ENOENT;
        case ERROR_DIRECTORY: return _PDCLIB_ENOTDIR;
        case ERROR_DIR_NOT_EMPTY: return _PDCLIB_ENOTEMPTY;
        case ERROR_DISK_CORRUPT: return _PDCLIB_EIO;
        case ERROR_DISK_FULL: return _PDCLIB_ENOSPC;
        case ERROR_DS_GENERIC_ERROR: return _PDCLIB_EIO;
        case ERROR_DUP_NAME: return _PDCLIB_EEXIST;
        case ERROR_EAS_DIDNT_FIT: return _PDCLIB_ENOSPC;
        case ERROR_EAS_NOT_SUPPORTED: return _PDCLIB_ENOTSUP;
        case ERROR_EA_LIST_INCONSISTENT: return _PDCLIB_EINVAL;
        case ERROR_EA_TABLE_FULL: return _PDCLIB_ENOSPC;
        case ERROR_END_OF_MEDIA: return _PDCLIB_ENOSPC;
        case ERROR_EOM_OVERFLOW: return _PDCLIB_EIO;
        case ERROR_EXE_MACHINE_TYPE_MISMATCH: return _PDCLIB_ENOEXEC;
        case ERROR_EXE_MARKED_INVALID: return _PDCLIB_ENOEXEC;
        case ERROR_FILEMARK_DETECTED: return _PDCLIB_EIO;
        case ERROR_FILENAME_EXCED_RANGE: return _PDCLIB_ENAMETOOLONG;
        case ERROR_FILE_CORRUPT: return _PDCLIB_EEXIST;
        case ERROR_FILE_EXISTS: return _PDCLIB_EEXIST;
        case ERROR_FILE_INVALID: return _PDCLIB_ENXIO;
        case ERROR_FILE_NOT_FOUND: return _PDCLIB_ENOENT;
        case ERROR_HANDLE_DISK_FULL: return _PDCLIB_ENOSPC;
        case ERROR_HANDLE_EOF: return _PDCLIB_ENODATA;
        case ERROR_INVALID_ADDRESS: return _PDCLIB_EINVAL;
        case ERROR_INVALID_AT_INTERRUPT_TIME: return _PDCLIB_EINTR;
        case ERROR_INVALID_BLOCK_LENGTH: return _PDCLIB_EIO;
        case ERROR_INVALID_DATA: return _PDCLIB_EINVAL;
        case ERROR_INVALID_DRIVE: return _PDCLIB_ENODEV;
        case ERROR_INVALID_EA_NAME: return _PDCLIB_EINVAL;
        case ERROR_INVALID_EXE_SIGNATURE: return _PDCLIB_ENOEXEC;
        case ERROR_INVALID_FUNCTION: return _PDCLIB_ENOENT;
        case ERROR_INVALID_HANDLE: return _PDCLIB_EBADF;
        case ERROR_INVALID_NAME: return _PDCLIB_ENOENT;
        case ERROR_INVALID_PARAMETER: return _PDCLIB_EINVAL;
        case ERROR_INVALID_SIGNAL_NUMBER: return _PDCLIB_EINVAL;
        case ERROR_IOPL_NOT_ENABLED: return _PDCLIB_ENOEXEC;
        case ERROR_IO_DEVICE: return _PDCLIB_EIO;
        case ERROR_IO_INCOMPLETE: return _PDCLIB_EAGAIN;
        case ERROR_IO_PENDING: return _PDCLIB_EAGAIN;
        case ERROR_LOCK_VIOLATION: return _PDCLIB_EBUSY;
        case ERROR_MAX_THRDS_REACHED: return _PDCLIB_EAGAIN;
        case ERROR_META_EXPANSION_TOO_LONG: return _PDCLIB_EINVAL;
        case ERROR_MOD_NOT_FOUND: return _PDCLIB_ENOENT;
        case ERROR_MORE_DATA: return _PDCLIB_EMSGSIZE;
        case ERROR_NEGATIVE_SEEK: return _PDCLIB_EINVAL;
        case ERROR_NETNAME_DELETED: return _PDCLIB_ENOENT;
        case ERROR_NOACCESS: return _PDCLIB_EFAULT;
        case ERROR_NONE_MAPPED: return _PDCLIB_EINVAL;
        case ERROR_NONPAGED_SYSTEM_RESOURCES: return _PDCLIB_EAGAIN;
        case ERROR_NOT_CONNECTED: return _PDCLIB_ENOLINK;
        case ERROR_NOT_ENOUGH_MEMORY: return _PDCLIB_ENOMEM;
        case ERROR_NOT_ENOUGH_QUOTA: return _PDCLIB_EIO;
        case ERROR_NOT_OWNER: return _PDCLIB_EPERM;
        case ERROR_NOT_READY: return _PDCLIB_EBUSY;
        case ERROR_NOT_SAME_DEVICE: return _PDCLIB_EXDEV;
        case ERROR_NOT_SUPPORTED: return _PDCLIB_ENOSYS;
        case ERROR_NO_DATA: return _PDCLIB_EPIPE;
        case ERROR_NO_DATA_DETECTED: return _PDCLIB_EIO;
        case ERROR_NO_MEDIA_IN_DRIVE: return _PDCLIB_EPIPE;
        case ERROR_NO_MORE_FILES: return _PDCLIB_ENODATA;
        case ERROR_NO_MORE_ITEMS: return _PDCLIB_ENODATA;
        case ERROR_NO_MORE_SEARCH_HANDLES: return _PDCLIB_ENFILE;
        case ERROR_NO_PROC_SLOTS: return _PDCLIB_EAGAIN;
        case ERROR_NO_SIGNAL_SENT: return _PDCLIB_EIO;
        case ERROR_NO_SYSTEM_RESOURCES: return _PDCLIB_EFBIG;
        case ERROR_NO_TOKEN: return _PDCLIB_EINVAL;
        case ERROR_OPEN_FAILED: return _PDCLIB_EIO;
        case ERROR_OPEN_FILES: return _PDCLIB_EAGAIN;
        case ERROR_OUTOFMEMORY: return _PDCLIB_ENOMEM;
        case ERROR_PAGED_SYSTEM_RESOURCES: return _PDCLIB_EAGAIN;
        case ERROR_PAGEFILE_QUOTA: return _PDCLIB_EAGAIN;
        case ERROR_PATH_NOT_FOUND: return _PDCLIB_ENOENT;
        case ERROR_PIPE_BUSY: return _PDCLIB_EBUSY;
        case ERROR_PIPE_CONNECTED: return _PDCLIB_EBUSY;
        case ERROR_PIPE_LISTENING: return _PDCLIB_EPIPE;
        case ERROR_PIPE_NOT_CONNECTED: return _PDCLIB_EEXIST;
        case ERROR_POSSIBLE_DEADLOCK: return _PDCLIB_EDEADLK;
        case ERROR_PRIVILEGE_NOT_HELD: return _PDCLIB_EPERM;
        case ERROR_PROCESS_ABORTED: return _PDCLIB_EFAULT;
        case ERROR_PROC_NOT_FOUND: return _PDCLIB_ESRCH;
        case ERROR_REM_NOT_LIST: return _PDCLIB_EHOSTUNREACH;
        case ERROR_SECTOR_NOT_FOUND: return _PDCLIB_EINVAL;
        case ERROR_SEEK: return _PDCLIB_EINVAL;
        case ERROR_SERVICE_REQUEST_TIMEOUT: return _PDCLIB_EBUSY;
        case ERROR_SETMARK_DETECTED: return _PDCLIB_EIO;
        case ERROR_SHARING_BUFFER_EXCEEDED: return _PDCLIB_ENOLCK;
        case ERROR_SHARING_VIOLATION: return _PDCLIB_EBUSY;
        case ERROR_SIGNAL_PENDING: return _PDCLIB_EBUSY;
        case ERROR_SIGNAL_REFUSED: return _PDCLIB_EIO;
        case ERROR_SXS_CANT_GEN_ACTCTX: return _PDCLIB_ENOENT;
        case ERROR_THREAD_1_INACTIVE: return _PDCLIB_EINVAL;
        case ERROR_TIMEOUT: return _PDCLIB_EBUSY;
        case ERROR_TOO_MANY_LINKS: return _PDCLIB_EMLINK;
        case ERROR_TOO_MANY_OPEN_FILES: return _PDCLIB_EMFILE;
        case ERROR_UNEXP_NET_ERR: return _PDCLIB_EIO;
        case ERROR_WAIT_NO_CHILDREN: return _PDCLIB_ECHILD;
        case ERROR_WORKING_SET_QUOTA: return _PDCLIB_EAGAIN;
        case ERROR_WRITE_PROTECT: return _PDCLIB_EROFS;
        default : return fallback_errno;
    }
    return fallback_errno;
}
